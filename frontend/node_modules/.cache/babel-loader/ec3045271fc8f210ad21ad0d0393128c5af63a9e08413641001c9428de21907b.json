{"ast":null,"code":"import{obtenerProductos}from\"../api/productos\";import{useEffect,useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{CarritoContext}from\"../context/CarritoContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Productos(_ref){let{filtros}=_ref;const[productos,setProductos]=useState([]);const{agregarAlCarrito}=useContext(CarritoContext);useEffect(()=>{obtenerProductos().then(setProductos);},[]);// ---------- FILTRAR PRODUCTOS -----------\nconst productosFiltrados=productos.filter(p=>{if(filtros.categoria&&String(p.id_categoria)!==filtros.categoria)return false;if(filtros.tipo_prenda&&p.tipo_prenda!==filtros.tipo_prenda)return false;if(filtros.estilo&&p.estilo!==filtros.estilo)return false;if(filtros.color&&p.color!==filtros.color)return false;if(filtros.talla&&p.talla!==filtros.talla)return false;if(p.precio<filtros.minPrice||p.precio>filtros.maxPrice)return false;if(filtros.busqueda&&!p.nombre.toLowerCase().includes(filtros.busqueda)){return false;}return true;});// ---------- PAGINACIÓN -----------\nconst productosPorPagina=9;const[paginaActual,setPaginaActual]=useState(1);const totalPaginas=Math.ceil(productosFiltrados.length/productosPorPagina);const indiceInicial=(paginaActual-1)*productosPorPagina;const indiceFinal=indiceInicial+productosPorPagina;const productosPagina=productosFiltrados.slice(indiceInicial,indiceFinal);const cambiarPagina=num=>{if(num<1||num>totalPaginas)return;setPaginaActual(num);};return/*#__PURE__*/_jsxs(\"article\",{className:\"art-newArrivals\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"box-tarjetas-newArrivals\",children:productosPagina.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"tarjeta-newArrivals\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"box-img-newArrivals\",children:/*#__PURE__*/_jsx(Link,{className:\"link-newArrivals\",to:\"/producto/\".concat(p.id_producto),children:/*#__PURE__*/_jsx(\"img\",{className:\"img-newArrivals\",src:p.imagen,alt:p.nombre})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box-info-newArrivals\",children:[/*#__PURE__*/_jsx(\"h3\",{children:p.nombre}),/*#__PURE__*/_jsx(\"p\",{children:p.descripcion}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Q\",p.precio]}),/*#__PURE__*/_jsx(\"button\",{className:\"add-produ\",onClick:()=>agregarAlCarrito(p),children:\"Agregar al carrito\"})]})]},p.id_producto))}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"prev\",onClick:e=>{e.preventDefault();cambiarPagina(paginaActual-1);},style:{pointerEvents:paginaActual===1?\"none\":\"auto\",opacity:paginaActual===1?0.5:1},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" Anterior\"]}),[...Array(totalPaginas)].map((_,i)=>/*#__PURE__*/_jsx(\"a\",{className:\"page-num \".concat(paginaActual===i+1?\"active\":\"\"),onClick:e=>{e.preventDefault();cambiarPagina(i+1);},children:i+1},i)),/*#__PURE__*/_jsxs(\"a\",{className:\"next\",onClick:e=>{e.preventDefault();cambiarPagina(paginaActual+1);},style:{pointerEvents:paginaActual===totalPaginas?\"none\":\"auto\",opacity:paginaActual===totalPaginas?0.5:1},children:[\"Siguiente \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-right\"})]})]})]});}","map":{"version":3,"names":["obtenerProductos","useEffect","useState","useContext","Link","CarritoContext","jsx","_jsx","jsxs","_jsxs","Productos","_ref","filtros","productos","setProductos","agregarAlCarrito","then","productosFiltrados","filter","p","categoria","String","id_categoria","tipo_prenda","estilo","color","talla","precio","minPrice","maxPrice","busqueda","nombre","toLowerCase","includes","productosPorPagina","paginaActual","setPaginaActual","totalPaginas","Math","ceil","length","indiceInicial","indiceFinal","productosPagina","slice","cambiarPagina","num","className","children","map","to","concat","id_producto","src","imagen","alt","descripcion","onClick","e","preventDefault","style","pointerEvents","opacity","Array","_","i"],"sources":["C:/Users/jeduo/OneDrive/Documentos/Full Stack/proyectos react/proyecto-final/frontend/src/Components/Productos.js"],"sourcesContent":["import { obtenerProductos } from \"../api/productos\";\r\nimport { useEffect, useState, useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CarritoContext } from \"../context/CarritoContext\";\r\n\r\nexport default function Productos({ filtros }) {\r\n\r\n  const [productos, setProductos] = useState([]);\r\n\r\n  const { agregarAlCarrito } = useContext(CarritoContext);\r\n\r\n  useEffect(() => {\r\n    obtenerProductos().then(setProductos);\r\n  }, []);\r\n\r\n  // ---------- FILTRAR PRODUCTOS -----------\r\n\r\n  const productosFiltrados = productos.filter(p => {\r\n    if (filtros.categoria && String(p.id_categoria) !== filtros.categoria) return false;\r\n    if (filtros.tipo_prenda && p.tipo_prenda !== filtros.tipo_prenda) return false;\r\n    if (filtros.estilo && p.estilo !== filtros.estilo) return false;\r\n    if (filtros.color && p.color !== filtros.color) return false;\r\n    if (filtros.talla && p.talla !== filtros.talla) return false;\r\n    if (p.precio < filtros.minPrice || p.precio > filtros.maxPrice) return false;\r\n\r\n    if (filtros.busqueda && !p.nombre.toLowerCase().includes(filtros.busqueda)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  });\r\n\r\n  // ---------- PAGINACIÓN -----------\r\n\r\n  const productosPorPagina = 9;\r\n  const [paginaActual, setPaginaActual] = useState(1);\r\n\r\n  const totalPaginas = Math.ceil(productosFiltrados.length / productosPorPagina);\r\n\r\n  const indiceInicial = (paginaActual - 1) * productosPorPagina;\r\n  const indiceFinal = indiceInicial + productosPorPagina;\r\n\r\n  const productosPagina = productosFiltrados.slice(indiceInicial, indiceFinal);\r\n\r\n  const cambiarPagina = (num) => {\r\n    if (num < 1 || num > totalPaginas) return;\r\n    setPaginaActual(num);\r\n  };\r\n\r\n  return (\r\n    <article className=\"art-newArrivals\">\r\n\r\n      <div className=\"box-tarjetas-newArrivals\">\r\n\r\n        {productosPagina.map(p => (\r\n          <div key={p.id_producto} className=\"tarjeta-newArrivals\">\r\n\r\n            <div className=\"box-img-newArrivals\">\r\n              <Link className=\"link-newArrivals\" to={`/producto/${p.id_producto}`}>\r\n                <img className=\"img-newArrivals\" src={p.imagen} alt={p.nombre}/>\r\n              </Link>\r\n            </div>\r\n\r\n            <div className=\"box-info-newArrivals\">\r\n              <h3>{p.nombre}</h3>\r\n              <p>{p.descripcion}</p>\r\n              <span>Q{p.precio}</span>\r\n\r\n              <button \r\n                className=\"add-produ\" \r\n                onClick={() => agregarAlCarrito(p)}\r\n              >\r\n                Agregar al carrito\r\n              </button>\r\n            </div>\r\n\r\n          </div>\r\n        ))}\r\n\r\n      </div>\r\n\r\n      {/* ---------- PAGINACIÓN ---------- */}\r\n      <div className=\"pagination\">\r\n\r\n        <a \r\n          className=\"prev\"\r\n          onClick={(e) => { e.preventDefault(); cambiarPagina(paginaActual - 1); }}\r\n          style={{ pointerEvents: paginaActual === 1 ? \"none\" : \"auto\", opacity: paginaActual === 1 ? 0.5 : 1 }}\r\n        >\r\n          <i className=\"fas fa-arrow-left\"></i> Anterior\r\n        </a>\r\n\r\n        {[...Array(totalPaginas)].map((_, i) => (\r\n          <a\r\n            key={i}\r\n            className={`page-num ${paginaActual === i + 1 ? \"active\" : \"\"}`}\r\n            onClick={(e) => { e.preventDefault(); cambiarPagina(i + 1); }}\r\n          >\r\n            {i + 1}\r\n          </a>\r\n        ))}\r\n\r\n        <a \r\n          className=\"next\"\r\n          onClick={(e) => { e.preventDefault(); cambiarPagina(paginaActual + 1); }}\r\n          style={{ pointerEvents: paginaActual === totalPaginas ? \"none\" : \"auto\", opacity: paginaActual === totalPaginas ? 0.5 : 1 }}\r\n        >\r\n          Siguiente <i className=\"fas fa-arrow-right\"></i>\r\n        </a>\r\n\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}