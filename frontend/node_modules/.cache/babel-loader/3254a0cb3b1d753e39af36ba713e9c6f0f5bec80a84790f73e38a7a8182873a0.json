{"ast":null,"code":"import _objectSpread from\"C:/Users/jeduo/OneDrive/Documentos/Full Stack/proyectos react/proyecto-final/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const CarritoContext=/*#__PURE__*/createContext();export function CarritoProvider(_ref){let{children}=_ref;const[carrito,setCarrito]=useState(()=>{const almacenado=localStorage.getItem(\"carrito\");return almacenado?JSON.parse(almacenado):[];});useEffect(()=>{localStorage.setItem(\"carrito\",JSON.stringify(carrito));},[carrito]);function agregarAlCarrito(producto){setCarrito(prev=>{const existe=prev.find(p=>p.id_producto===producto.id_producto);if(existe){return prev.map(p=>p.id_producto===producto.id_producto?_objectSpread(_objectSpread({},p),{},{cantidad:p.cantidad+1}):p);}else{return[...prev,_objectSpread(_objectSpread({},producto),{},{cantidad:1})];}});}function reducirCantidad(id_producto){setCarrito(prev=>prev.map(p=>p.id_producto===id_producto?_objectSpread(_objectSpread({},p),{},{cantidad:Math.max(p.cantidad-1,1)}):p));}function aumentarCantidad(id_producto){setCarrito(prev=>prev.map(p=>p.id_producto===id_producto?_objectSpread(_objectSpread({},p),{},{cantidad:p.cantidad+1}):p));}function eliminarDelCarrito(id_producto){setCarrito(prev=>prev.filter(p=>p.id_producto!==id_producto));}function vaciarCarrito(){setCarrito([]);localStorage.removeItem(\"carrito\");}return/*#__PURE__*/_jsx(CarritoContext.Provider,{value:{carrito,agregarAlCarrito,eliminarDelCarrito,vaciarCarrito,reducirCantidad,aumentarCantidad},children:children});}","map":{"version":3,"names":["createContext","useState","useEffect","jsx","_jsx","CarritoContext","CarritoProvider","_ref","children","carrito","setCarrito","almacenado","localStorage","getItem","JSON","parse","setItem","stringify","agregarAlCarrito","producto","prev","existe","find","p","id_producto","map","_objectSpread","cantidad","reducirCantidad","Math","max","aumentarCantidad","eliminarDelCarrito","filter","vaciarCarrito","removeItem","Provider","value"],"sources":["C:/Users/jeduo/OneDrive/Documentos/Full Stack/proyectos react/proyecto-final/frontend/src/context/CarritoContext.js"],"sourcesContent":["import { createContext, useState, useEffect} from \"react\";\r\n\r\nexport const CarritoContext = createContext();\r\n\r\nexport function CarritoProvider({children}) {\r\n\r\n  const[carrito, setCarrito] = useState(() => {\r\n\r\n    const almacenado = localStorage.getItem(\"carrito\");\r\n    return almacenado ? JSON.parse(almacenado) : [];\r\n  });\r\n  useEffect(()=>{\r\n    localStorage.setItem(\"carrito\", JSON.stringify(carrito));\r\n  }, [carrito]);\r\n\r\n  function agregarAlCarrito(producto){\r\n    setCarrito(prev=> {\r\n      const existe = prev.find(p=> p.id_producto === producto.id_producto);\r\n\r\n      if(existe){\r\n        return prev.map(p=> p.id_producto === producto.id_producto ? {...p, cantidad: p.cantidad +1}:p\r\n        );\r\n      }else{\r\n        return[...prev, {...producto, cantidad: 1}];\r\n      }\r\n    });\r\n  }\r\n\r\n  function reducirCantidad(id_producto) {\r\n    setCarrito(prev =>\r\n      prev.map(p =>\r\n        p.id_producto === id_producto\r\n          ? { ...p, cantidad: Math.max(p.cantidad - 1, 1) }\r\n          : p\r\n      )\r\n    );\r\n  }\r\n  function aumentarCantidad(id_producto) {\r\n    setCarrito(prev =>\r\n      prev.map(p =>\r\n        p.id_producto === id_producto\r\n          ? { ...p, cantidad: p.cantidad + 1 }\r\n          : p\r\n      )\r\n    );\r\n  }\r\n\r\n\r\n  function eliminarDelCarrito(id_producto){\r\n    setCarrito(prev => prev.filter(p=> p.id_producto !== id_producto));\r\n  }\r\n  function vaciarCarrito(){\r\n    setCarrito([])\r\n    localStorage.removeItem(\"carrito\");\r\n  }\r\n  return (\r\n    <CarritoContext.Provider value={{carrito, agregarAlCarrito, eliminarDelCarrito, vaciarCarrito, reducirCantidad, aumentarCantidad}}>\r\n      {children}\r\n    </CarritoContext.Provider>\r\n  )\r\n}\r\n"],"mappings":"0KAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1D,MAAO,MAAM,CAAAC,cAAc,cAAGL,aAAa,CAAC,CAAC,CAE7C,MAAO,SAAS,CAAAM,eAAeA,CAAAC,IAAA,CAAa,IAAZ,CAACC,QAAQ,CAAC,CAAAD,IAAA,CAExC,KAAK,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,IAAM,CAE1C,KAAM,CAAAU,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAClD,MAAO,CAAAF,UAAU,CAAGG,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,CAAG,EAAE,CACjD,CAAC,CAAC,CACFT,SAAS,CAAC,IAAI,CACZU,YAAY,CAACI,OAAO,CAAC,SAAS,CAAEF,IAAI,CAACG,SAAS,CAACR,OAAO,CAAC,CAAC,CAC1D,CAAC,CAAE,CAACA,OAAO,CAAC,CAAC,CAEb,QAAS,CAAAS,gBAAgBA,CAACC,QAAQ,CAAC,CACjCT,UAAU,CAACU,IAAI,EAAG,CAChB,KAAM,CAAAC,MAAM,CAAGD,IAAI,CAACE,IAAI,CAACC,CAAC,EAAGA,CAAC,CAACC,WAAW,GAAKL,QAAQ,CAACK,WAAW,CAAC,CAEpE,GAAGH,MAAM,CAAC,CACR,MAAO,CAAAD,IAAI,CAACK,GAAG,CAACF,CAAC,EAAGA,CAAC,CAACC,WAAW,GAAKL,QAAQ,CAACK,WAAW,CAAAE,aAAA,CAAAA,aAAA,IAAOH,CAAC,MAAEI,QAAQ,CAAEJ,CAAC,CAACI,QAAQ,CAAE,CAAC,GAAEJ,CAC7F,CAAC,CACH,CAAC,IAAI,CACH,MAAM,CAAC,GAAGH,IAAI,CAAAM,aAAA,CAAAA,aAAA,IAAMP,QAAQ,MAAEQ,QAAQ,CAAE,CAAC,GAAE,CAC7C,CACF,CAAC,CAAC,CACJ,CAEA,QAAS,CAAAC,eAAeA,CAACJ,WAAW,CAAE,CACpCd,UAAU,CAACU,IAAI,EACbA,IAAI,CAACK,GAAG,CAACF,CAAC,EACRA,CAAC,CAACC,WAAW,GAAKA,WAAW,CAAAE,aAAA,CAAAA,aAAA,IACpBH,CAAC,MAAEI,QAAQ,CAAEE,IAAI,CAACC,GAAG,CAACP,CAAC,CAACI,QAAQ,CAAG,CAAC,CAAE,CAAC,CAAC,GAC7CJ,CACN,CACF,CAAC,CACH,CACA,QAAS,CAAAQ,gBAAgBA,CAACP,WAAW,CAAE,CACrCd,UAAU,CAACU,IAAI,EACbA,IAAI,CAACK,GAAG,CAACF,CAAC,EACRA,CAAC,CAACC,WAAW,GAAKA,WAAW,CAAAE,aAAA,CAAAA,aAAA,IACpBH,CAAC,MAAEI,QAAQ,CAAEJ,CAAC,CAACI,QAAQ,CAAG,CAAC,GAChCJ,CACN,CACF,CAAC,CACH,CAGA,QAAS,CAAAS,kBAAkBA,CAACR,WAAW,CAAC,CACtCd,UAAU,CAACU,IAAI,EAAIA,IAAI,CAACa,MAAM,CAACV,CAAC,EAAGA,CAAC,CAACC,WAAW,GAAKA,WAAW,CAAC,CAAC,CACpE,CACA,QAAS,CAAAU,aAAaA,CAAA,CAAE,CACtBxB,UAAU,CAAC,EAAE,CAAC,CACdE,YAAY,CAACuB,UAAU,CAAC,SAAS,CAAC,CACpC,CACA,mBACE/B,IAAA,CAACC,cAAc,CAAC+B,QAAQ,EAACC,KAAK,CAAE,CAAC5B,OAAO,CAAES,gBAAgB,CAAEc,kBAAkB,CAAEE,aAAa,CAAEN,eAAe,CAAEG,gBAAgB,CAAE,CAAAvB,QAAA,CAC/HA,QAAQ,CACc,CAAC,CAE9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}